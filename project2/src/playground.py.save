#!/usr/bin/env python 

import json 
import subprocess 
import os 
from socket import * 
from time import time 


s = socket(AF_INET, SOCK_DGRAM)
host = "10.0.0.1"
port= 5599 
buf = 1024 
addr = (host, port) 

RTO = 1 
 
testdata=["1000","2000","3000","4000","5000","6000","7000","8000","9000","10000"
	 ,"11000" ,"12000","13000","14000","15000","16000","17000","18000","19000"
	 ,"20000"]

ackdata = ['']*20

#for count, data in enumerate(testdata):
#	while (ackdata[count] == ''):
#		s.sendto(testdata[count].encode(),addr)
#		print("sending .." + testdata[count])  
#		ACK, address = s.recvfrom(1024) 
#		if(ACK != ''): 
#			print("getting ack") 
#			ackdata[count] = "ack" + str(count+1) +  "recv"
#		else: 
#			print("waiting")
#		
#	
#print(ackdata)
#print("done")

for count, data in enumerate(testdata): 
	while (ackdata[count] = ''): 
		tempRTO = time() + float(RTO)
		s.send(testdata[count].encode(),addr)
		while(time<timeRTO ): 
			sadlks
			skdfjnlsdk
		if(time>RTO and ackdata[count] = ''): 
			count = count -1

s.close()	
